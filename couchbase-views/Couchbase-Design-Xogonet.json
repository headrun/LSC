{"views":{"POLI-modifiedTS":{"map":"function (doc, meta) {\n//  if (doc.type==\"PO_Items_server\" && doc.po_line_item_no.length == 5 && doc.po_line_item_status != \"Deleted\" && doc.po_line_item_delivery_status != \"Closed\") {\n  if (doc.type==\"PO_Items_server\" && doc.po_line_item_no.length == 5 ) {  \n          var splitDate = String(doc.modified_ts).split(\"/\");\n          var getYear   = String(splitDate[2]).split(\" \")[0];\n          var getMonth  = String(splitDate[1]);\n          var getDate   = String(splitDate[0]);\n          var dateString = '' + getYear + getMonth + getDate;\n//    \t  var emitString = dateString + doc.supplier_id;\n    \t  var emitString = doc.supplier_id + dateString;\n//    \t  emit ([doc.supplier_id, dateString],[meta.id,doc.po_no, doc.po_date,doc.supplier_id,doc.po_no_of_line_items, doc.po_value,doc.po_status,doc.po_delivery_status,doc.channels,doc.code,doc.pu_id,doc.pu_desc,doc.po_line_item_no,doc.po_line_item_material_code,doc.po_material_desc,doc.po_schedule_date,doc.po_line_item_qty,doc.po_line_item_pending_qty,doc.po_line_item_value,doc.po_line_item_status,doc.po_line_item_change_type,doc.po_line_item_delivery_status,doc.buyer_id,doc.so_number,doc.so_line_number,doc.qty_uom,doc.delivery_date,doc.on_time_in_full_delivery]);\n    \temit (emitString,[doc.po_no, doc.po_date,doc.supplier_id,doc.po_no_of_line_items, doc.po_value,doc.po_status,doc.po_delivery_status,doc.channels,doc.code,doc.pu_id,doc.pu_desc,doc.po_line_item_no,doc.po_line_item_material_code,doc.po_material_desc,doc.po_schedule_date,doc.po_line_item_qty,doc.po_line_item_pending_qty,doc.po_line_item_value,doc.po_line_item_status,doc.po_line_item_change_type,doc.po_line_item_delivery_status,doc.buyer_id,doc.so_number,doc.so_line_number,doc.qty_uom,doc.delivery_date,doc.on_time_in_full_delivery,doc.commitment_date, doc.low_lead_time,doc.commitment_due_date]);\n//    \temit ([dateString,doc.supplier_id],[meta.id,doc.po_no, doc.po_date,doc.supplier_id,doc.po_no_of_line_items, doc.po_value,doc.po_status,doc.po_delivery_status,doc.channels,doc.code,doc.pu_id,doc.pu_desc,doc.po_line_item_no,doc.po_line_item_material_code,doc.po_material_desc,doc.po_schedule_date,doc.po_line_item_qty,doc.po_line_item_pending_qty,doc.po_line_item_value,doc.po_line_item_status,doc.po_line_item_change_type,doc.po_line_item_delivery_status,doc.buyer_id,doc.so_number,doc.so_line_number,doc.qty_uom,doc.delivery_date,doc.on_time_in_full_delivery]);\n      \n  }\n}"},"GE-modifiedTS":{"map":"function (doc, meta) {\n  if (doc.type==\"GateEntry\") {\n  \n          var splitDate = String(doc.modified_timestamp).split(\"/\");\n          var getYear   = String(splitDate[2]).split(\" \")[0];\n          var getMonth  = String(splitDate[1]);\n          var getDate   = String(splitDate[0]);\n          var dateString = '' + getYear + getMonth + getDate;\n    \t  var emitString = doc.supplier_id + dateString;\n    \temit (emitString,[doc.gate_entry_id,doc.gate_entry_date,doc.po_no, doc.po_date,doc.po_line_item_no,doc.po_line_item_material_code,doc.supplier_id,doc.channels,doc.gate_entry_item_qty,doc.supplier_invoice_no,doc.grn_done_flag]);\n  }\n}"},"GRN-modifiedTS":{"map":"function (doc, meta) {\n  if (doc.type==\"GRN\") {\n  \n          var splitDate = String(doc.modified_timestamp).split(\"/\");\n          var getYear   = String(splitDate[2]).split(\" \")[0];\n          var getMonth  = String(splitDate[1]);\n          var getDate   = String(splitDate[0]);\n          var dateString = '' + getYear + getMonth + getDate;\n    \t  var emitString = doc.supplier_id + dateString\n    \temit (emitString,[doc.po_no,doc.po_date,doc.supplier_id,doc.po_line_item_no,doc.channels,doc.po_line_item_material_code,doc.po_line_item_material_desc,doc.grn_no, doc.grn_qty,doc.grn_date,doc.ge_number,doc.invoice_no,doc.invoice_date]);\n    \n    /*\n   \"channels\": \"0000500280\",\n   \"po_line_item_no\": \"00040\",\n   \"po_line_item_material_code\": \"X1-10360\",\n   \"po_line_item_material_desc\": \"LTM SERIAL NUMBER PLATE\",\n   \"grn_no\": \"5000053573\",\n   \"grn_qty\": \"34\",\n   \"grn_date\": \"21/01/2016\",\n   \"ge_number\": \"180034351\",\n   \"invoice_no\": \"3436\",\n   \"invoice_date\": \"20/01/2016\",\n\n*/\n\n  }\n}"},"GRN-Reject-modifedTS":{"map":"function (doc, meta) {\n  if (doc.type==\"GRNreject\") {\n  \n          var splitDate = String(doc.modified_timestamp).split(\"/\");\n          var getYear   = String(splitDate[2]).split(\" \")[0];\n          var getMonth  = String(splitDate[1]);\n          var getDate   = String(splitDate[0]);\n          var dateString = '' + getYear + getMonth + getDate;\n//    \temit (meta.id, dateString);\n    \t  var emitString = doc.supplier_id + dateString\n    \temit (emitString,[doc.po_no,doc.po_line_item_no,doc.po_line_item_material_code,doc.po_line_item_received_qty,doc.grn_no, doc.grn_reject_qty,doc.grn_reject_reason,doc.grn_reject_date,doc.timestamp,doc.supplier_id,doc.channels,doc.supplier_invoice_no]);\n\n//    emit (meta.id, meta.id);\n  }\n}"},"PendingInvoices-modifiedTS":{"map":"function (doc, meta) {\n  if (doc.type==\"InvPayment\"){\n      emit (doc.supplier_id, [doc.supplier_id,doc.invoice_no,doc.invoice_date,doc.invoice_value]);\n  }\n \n}"},"GE-By-POLI":{"map":"function (doc, meta) {\n  if (doc.type==\"GateEntry\") {\n    var emitString = doc.po_no + doc.po_line_item_no;\n    emit (emitString,[doc.gate_entry_id,doc.gate_entry_date,doc.po_no, doc.po_date,doc.po_line_item_no,doc.po_line_item_material_code,doc.supplier_id,doc.channels,doc.gate_entry_item_qty,doc.supplier_invoice_no,doc.grn_done_flag]);\n  }\n}"},"GRN-By-POLI":{"map":"function (doc, meta) {\n  if (doc.type==\"GRN\") {\n    var emitString = doc.po_no + doc.po_line_item_no;\n    emit (emitString,[doc.po_no,doc.po_date,doc.supplier_id,doc.po_line_item_no,doc.channels,doc.po_line_item_material_code,doc.po_line_item_material_desc,doc.grn_no, doc.grn_qty,doc.grn_date,doc.ge_number,doc.invoice_no,doc.invoice_date]);\n    \n  }\n}"},"GRN-Reject-By-POLI":{"map":"function (doc, meta) {\n  if (doc.type==\"GRNreject\") {\n    var emitString = doc.po_no + doc.po_line_item_no;\n    emit (emitString,[doc.po_no,doc.po_line_item_no,doc.po_line_item_material_code,doc.po_line_item_received_qty,doc.grn_no, doc.grn_reject_qty,doc.grn_reject_reason,doc.grn_reject_date,doc.timestamp,doc.supplier_id,doc.channels,doc.supplier_invoice_no]);\n\n//    emit (meta.id, meta.id);\n  }\n}"},"POLI-Approval":{"map":"function (doc, meta) {\n  if (doc.type == \"PO_Items\" ){\n    for(var approve_array in doc.approval){\n      var emitString = doc.po_no + doc.po_line_item_no;\n      emit( emitString,[doc.po_no, doc.po_line_item_no, doc.approval[approve_array].commitment_date , doc.approval[approve_array].commitment_date_ts , doc.approval[approve_array].cycle_id, doc.approval[approve_array].approval_status, doc.approval[approve_array].approved_by, doc.approval[approve_array].approval_ts, doc.po_line_item_material_code]);\n    }\n  }\n}"},"POLI-Stages":{"map":"function (doc, meta) {\n  if (doc.type == \"PO_Items\" ){\n    var emitString = doc.po_no + doc.po_line_item_no;\n    for(var stage_array in doc.stages){\n      if (doc.stages[stage_array].invoice_no == \"\")\n        emit( emitString,[doc.po_no, doc.po_line_item_no, doc.stages[stage_array].id,doc.stages[stage_array].stageid,doc.stages[stage_array].stagename,doc.stages[stage_array].stagedays,doc.stages[stage_array].created_ts,doc.stages[stage_array].stage_completion_flag,doc.stages[stage_array].pending_qty,doc.stages[stage_array].completion_date,doc.stages[stage_array].on_schedule, doc.po_line_item_pending_qty, doc.po_line_item_material_code]);\n    }\n  }\n}\n"},"POLI-Stage-Completion":{"map":"function (doc, meta) {\n  if (doc.type == \"PO_Items\" ){\n    var emitString = doc.po_no + doc.po_line_item_no;\n    for(var stage_array in doc.stages){\n      if (doc.stages[stage_array].invoice_no == \"\") {\n        if (doc.stages[stage_array].stage_completion.length == 0){\n            emit( emitString,[doc.po_no, doc.po_line_item_no, doc.stages[stage_array].id,doc.stages[stage_array].stageid,doc.stages[stage_array].stagename,null,null,doc.po_line_item_material_code]);\n        }\n        else {\n          for (var stage_completion_array in doc.stages[stage_array].stage_completion){\n            emit (emitString,[doc.po_no, doc.po_line_item_no, doc.stages[stage_array].id,doc.stages[stage_array].stageid,doc.stages[stage_array].stagename,doc.stages[stage_array].stage_completion[stage_completion_array].alloc_qty,doc.stages[stage_array].stage_completion[stage_completion_array].updated_ts,doc.po_line_item_material_code]);\n          }\n        }\n      }\n    }\n  }\n}\n"}}}